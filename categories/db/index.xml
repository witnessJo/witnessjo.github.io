<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Db on Richard Jo&#39;s journal</title>
    <link>https://jongyoungcha.github.io/categories/db/</link>
    <description>Recent content in Db on Richard Jo&#39;s journal</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 12 Dec 2025 16:05:13 +0900</lastBuildDate>
    <atom:link href="https://jongyoungcha.github.io/categories/db/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Isolation Levels for PostgreSQL</title>
      <link>https://jongyoungcha.github.io/posts/db/isolation-levels/</link>
      <pubDate>Fri, 12 Dec 2025 00:00:00 +0900</pubDate>
      <guid>https://jongyoungcha.github.io/posts/db/isolation-levels/</guid>
      <description>&lt;h2 id=&#34;this-post-describes-the-isolation-levels-in-postgresql-and-their-implications-dot&#34;&gt;This post describes the isolation levels in PostgreSQL and their implications.&lt;/h2&gt;&#xA;&lt;h3 id=&#34;isolation-levels-overview&#34;&gt;Isolation Levels Overview&lt;/h3&gt;&#xA;&lt;p&gt;PostgreSQL supports four standard isolation levels defined by the SQL standard:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Read Uncommitted (Same as Read Committed in PostgreSQL)&lt;/li&gt;&#xA;&lt;li&gt;Read Committed&lt;/li&gt;&#xA;&lt;li&gt;Repeatable Read&lt;/li&gt;&#xA;&lt;li&gt;Serializable&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Each level provides different guarantees about the visibility of data changes made by concurrent transactions.&lt;/p&gt;&#xA;&lt;h3 id=&#34;read-uncommitted&#34;&gt;Read Uncommitted&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;The lowest isolation level.&lt;/li&gt;&#xA;&lt;li&gt;Transactions can see uncommitted changes made by other transactions (dirty reads).&lt;/li&gt;&#xA;&lt;li&gt;Not supported in PostgreSQL; it behaves like Read Committed. (It is defined in settings but has no effect.)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;read-committed&#34;&gt;Read Committed&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Default isolation level in PostgreSQL.&lt;/li&gt;&#xA;&lt;li&gt;A transaction sees only data committed before the query began.&lt;/li&gt;&#xA;&lt;li&gt;Prevents dirty reads but allows non-repeatable reads and phantom reads.&lt;/li&gt;&#xA;&lt;li&gt;Suitable for most applications where high concurrency is required.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;Time&lt;/th&gt;&#xA;          &lt;th&gt;f-tx&lt;/th&gt;&#xA;          &lt;th&gt;s-tx&lt;/th&gt;&#xA;          &lt;th&gt;Value&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;          &lt;td&gt;BEGIN&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;BEGIN&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;READ (1)&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;4&lt;/td&gt;&#xA;          &lt;td&gt;UPDATE &amp;hellip; +1 (locks)&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;5&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;UPDATE &amp;hellip; +1 → &lt;strong&gt;&lt;strong&gt;WAITS&lt;/strong&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;6&lt;/td&gt;&#xA;          &lt;td&gt;COMMIT (writes 2)&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;7&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ unblocked&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;8&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ reloads (2)&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;9&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ applies +1 (3)&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;10&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ COMMIT (writes 3)&lt;/td&gt;&#xA;          &lt;td&gt;3&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 id=&#34;repeatable-read&#34;&gt;Repeatable Read&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;A transaction sees a consistent snapshot of the database as of the start of the transaction.&lt;/li&gt;&#xA;&lt;li&gt;Prevents dirty reads and non-repeatable reads but allows phantom reads.&lt;/li&gt;&#xA;&lt;li&gt;Suitable for scenarios where consistent reads are required within a transaction.&lt;/li&gt;&#xA;&lt;li&gt;May lead to serialization anomalies in highly concurrent environments.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;Time&lt;/th&gt;&#xA;          &lt;th&gt;f-tx&lt;/th&gt;&#xA;          &lt;th&gt;s-tx&lt;/th&gt;&#xA;          &lt;th&gt;Value&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;          &lt;td&gt;BEGIN&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;BEGIN (snapshot: sees 1)&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;3&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;READ (1)&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;4&lt;/td&gt;&#xA;          &lt;td&gt;UPDATE &amp;hellip; +1 (locks)&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;5&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;UPDATE &amp;hellip; +1 → &lt;strong&gt;&lt;strong&gt;WAITS&lt;/strong&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;1&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;6&lt;/td&gt;&#xA;          &lt;td&gt;COMMIT (writes 2)&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;7&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ &lt;strong&gt;&lt;strong&gt;ERROR: could not serialize&lt;/strong&gt;&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;8&lt;/td&gt;&#xA;          &lt;td&gt;&lt;/td&gt;&#xA;          &lt;td&gt;→ ROLLBACK&lt;/td&gt;&#xA;          &lt;td&gt;2&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 id=&#34;serializable&#34;&gt;Serializable&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;The highest isolation level.&lt;/li&gt;&#xA;&lt;li&gt;Transactions are executed in a way that they appear to be serialized.&lt;/li&gt;&#xA;&lt;li&gt;Prevents dirty reads, non-repeatable reads, and phantom reads.&lt;/li&gt;&#xA;&lt;li&gt;May lead to serialization failures, requiring transactions to be retried.&lt;/li&gt;&#xA;&lt;li&gt;Suitable for applications requiring strict consistency.&lt;/li&gt;&#xA;&lt;li&gt;It&amp;rsquo;s almost same with Repeatable Read in PostgreSQL, but with additional checks to ensure serializability. Such cases are&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;Write Skew Anomaly&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
